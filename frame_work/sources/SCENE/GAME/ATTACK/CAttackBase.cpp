//=============================================================================
//
// CAttackBaseクラス [CAttackBase.cpp]
// Author : 塚本　俊彦
//
//=============================================================================
//*****************************************************************************
// インクルード
//*****************************************************************************
#include "CAttackBase.h"

#include "../PLAYER/CPlayer.h"


//*****************************************************************************
// マクロ
//*****************************************************************************


//*****************************************************************************
// 静的メンバ変数
//*****************************************************************************

//*****************************************************************************
// コンストラクタ
//*****************************************************************************
CAttackBase::CAttackBase(LPDIRECT3DDEVICE9 *pDevice, int nPriority, OBJTYPE objType) : CScene2D(pDevice, nPriority, objType)
{
	// 描画しない
	SetDrawFlag(false);
	
	// 変数初期化
	m_nCount = 0;

	for (int i = 0; i < MAXIMUM_NUMBER_OF_PLAYER; ++i)
	{
		m_bHitPlayer[i] = false;
	}
}

//*****************************************************************************
// デストラクタ
//*****************************************************************************
CAttackBase ::~CAttackBase(void)
{
}

//*****************************************************************************
// 初期化
//*****************************************************************************
HRESULT CAttackBase::Init()
{
	
	return S_OK;
}

//*****************************************************************************
// 終了
//*****************************************************************************
void CAttackBase::Uninit(void)
{
	CScene2D::Uninit();
}

//*****************************************************************************
// 更新
//*****************************************************************************
void CAttackBase::Update(void)
{
	m_nCount++;

	// 寿命？
	if (m_nCount > m_nEndTime){
		Uninit();
	}

	// 当たり判定フラグ更新
	if (m_nCount > m_nHitStartTime){
		m_bHitFlg = true;
	}
	if (m_nHitEndTime < m_nCount){
		m_bHitFlg = false;
	}
}

//*****************************************************************************
//	攻撃がヒットした際に呼び出される関数
//	 引数　　ヒットしたプレイヤーのプレイヤー番号
//*****************************************************************************
void CAttackBase::HitPlayer(CPlayer* pPlayer)
{
	int i = pPlayer->GetPlayerNum();
	m_bHitPlayer[i] = true;
}

bool CAttackBase::GetHitFlag(int playerID)
{
	return m_bHitPlayer[playerID];
};
//----EOF-------